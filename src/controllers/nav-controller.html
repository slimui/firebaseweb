<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../datastores/imageit-datastore.html">

<dom-module id="nav-controller">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

      [view="login"] #logout {
        visibility: hidden;
      }
      
      [view="form"] #back {
        display: none;
      }
      
      [view="posts"] #go-to-posts {
        visibility: hidden;
      }

    </style>
    <div id="nav-wrapper" class="layout horizontal justified center" view$="[[view]]">
      <div class="flex">
        <paper-icon-button id="back" icon="arrow-back" on-click="goToForm"></paper-icon-button>
        <paper-button id="go-to-posts" on-click="goToPosts">View Posts</paper-button>
      </div>
      <div class="layout horizontal center">
        <span>[[account.userEmail]]</span>
        <paper-icon-button id="logout" icon="power-settings-new" on-click="logout"></paper-icon-button>
      </div>
    </div>
  </template>
  <script>
    Polymer({
       is: "nav-controller",

       behaviors: [ImageitDatastoreBehavior],

       properties: {
         view: String,
         account: Object,
         showLogout: {
           type: Boolean,
           computed: '_showLogout(view)'
         }
       },

       _showLogout: function(view) {
         return view != 'login'
       },

       // Functions
       logout: function() {
         this.fire('logout');
       },

       goToPosts: function() {
         this.dispatch({type: 'setView', view: 'posts'});
       },

       goToForm: function() {
         this.dispatch({type: 'setView', view: 'form'});
       }


    });
  </script>
</dom-module>